---
title: Identity Management
excerpt: ''
deprecated: false
hidden: true
metadata:
  title: ''
  description: ''
  robots: noindex
next:
  description: ''
---
[block:api-header]
{
  "title": "Overview"
}
[/block]
Identity management is how CleverTap attributes properties and events performed on your application to a specific user. It is the process of defining your users' information on the CleverTap dashboard by providing each user with a unique identifier. 



# Identify Users
CleverTap assigns a user identity to each user. A user identity is a primary key that you define in your database to identify your user as unique.
[block:callout]
{
  "type": "success",
  "body": "Some user identity examples include:\n* Customer ID\n* Order ID\n* Merchant ID \n* Phone number\n* Email",
  "title": "User Identity Examples"
}
[/block]
CleverTap supports the following types of identity: <<sunil to clarity which IDs are autogenerated or user configured>>>

  * CleverTap ID: CleverTap's own primary key to identify users
  * Email ID: abc@xyz.tld
  * Phone number: +<area code><phone number>
  * Identity: Any other unique identifiers such as, orderID, userID, or shopID

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/1318579-User_Identity_Profile.png",
        "User_Identity_Profile.png",
        1999,
        537,
        "#fafafa"
      ]
    }
  ]
}
[/block]
##Identify Logged-in Users

Depending on your business, the best practice is to identify your logged-in users by using a primary key that you already use in your database as an identity on CleverTap.

<<@sunil you can ask clevrertap to identify users based on the identity you have defined.>>
[block:callout]
{
  "type": "success",
  "body": "Each business may want to choose a different primary key as a unique identity, such as:\n* An over-the-top (OTT) platform can use an email.\n* A payment gateway can use a phone number.",
  "title": "Common Use Case Examples with a Primary Key"
}
[/block]
Creating an internal user ID is also a recommended best practice. An excellent way to implement identity creation on login is to embed the `onUserLogin` method  provided by the CleverTap SDK. For more information <<@Sunil to add a link to onuserlogin>>

## Email ID
The email ID is a preferred way of identifying users as digitalization trends have let users sign up for popular email services and have a primary identification always enabled. On CleverTap, the email must be unique to be set as an identity.
[block:callout]
{
  "type": "success",
  "body": "Some use cases for an email as an identity include:\n  * Video streaming services.\n  * Various subscription-based services such as, online groceries or music streaming.",
  "title": "Common Use Case Examples with an Email ID"
}
[/block]
To pass an email to CleverTap as an identity, you must ensure the *Email* field is present in the onUserLogin method. 

The following is a web example:
[block:code]
{
  "codes": [
    {
      "code": "clevertap.onUserLogin.push({\n \"Site\": {\n   \"Name\": \"Jack Montana\",            // String\n   \"Email\": \"jack@gmail.com\",         // Email address of the user\n   \"Gender\": \"M\",                     // Can be either M or F\n   \"DOB\": new Date(),                 // Date of Birth. Date object\n\n// optional fields. controls whether the user will be sent email, push etc.\n   \"MSG-email\": false,                // Disable email notifications\n   \"MSG-push\": true,                  // Enable push notifications\n   \"MSG-sms\": true,                   // Enable sms notifications\n   \"MSG-whatsapp\": true,              // Enable WhatsApp notifications\n   \n }\n});",
      "language": "javascript"
    }
  ]
}
[/block]
## Mobile Phone Number
The accessibility of smartphones has enabled businesses to use the mobile phone number as an identity. Users can sign up for any product simply by using their phone number and have an easy onboarding experience. 
[block:callout]
{
  "type": "success",
  "title": "Common Use Case Examples with a Mobile Phone Number",
  "body": "Some use cases for a mobile phone number as an identity include:\n  * Any productivity apps because users want to experience the actual app functionality quickly rather than spend time in signup.\n  * Fintech services using mobile phone numbers for quicker login and signup."
}
[/block]
To pass a mobile phone number to CleverTap as an identity, you need to ensure the *Phone* field is present in the onUserLogin method and the area code is specified in the value for the phone. 

The following is a web example:
[block:code]
{
  "codes": [
    {
      "code": "clevertap.onUserLogin.push({\n \"Site\": {\n   \"Name\": \"Jack Montana\",            // String\n   \"Phone\": \"+14155551234\",           // Phone (with the country code)\n   \"Gender\": \"M\",                     // Can be either M or F\n   \"DOB\": new Date(),                 // Date of Birth. Date object\n\n// optional fields. controls whether the user will be sent email, push etc.\n   \"MSG-email\": false,                // Disable email notifications\n   \"MSG-push\": true,                  // Enable push notifications\n   \"MSG-sms\": true,                   // Enable sms notifications\n   \"MSG-whatsapp\": true,              // Enable WhatsApp notifications\n   \n }\n});\n",
      "language": "javascript"
    }
  ]
}
[/block]
## CleverTap ID
[block:callout]
{
  "type": "warning",
  "body": "The issue with using email and mobile phone numbers as identities is that they must be unique for all users. This means that you cannot update these identities. If an older identity is assigned to a new user, the data would still be associated with the previous user's profile.",
  "title": "Limitations with Emails and Mobile Phone Numbers"
}
[/block]
To avoid the scenario above, you can use the third form of identity management using the *Identity* field as an identifier for the user profiles. This provides the capability to add any unique string used as a primary key on your systems as an identifier. Because this information is generally abstracted from the end-user, this form of identity management is immutable and highly recommended. 
[block:callout]
{
  "type": "success",
  "title": "Common Use Case Examples with a Unique Identity",
  "body": "Some use cases for a unique identity as an identity include:\n* Identity can be used in place of an email or a mobile phone number because the user can change them at any time. \n* An identity field is viable and effective where you want your own identity to identify user profiles.\n\n\n<<@sunil to rework this. This is not a use case>>"
}
[/block]
To pass an identity field to CleverTap as an identity, check that the *Identity* field is present in the `onUserLogin` method. 

The following is a web example:

<<@sunil to add tabbed javascript or placeholder text>>>
[block:code]
{
  "codes": [
    {
      "code": "clevertap.onUserLogin.push({\n \"Site\": {\n   \"Name\": \"Jack Montana\",            // String\n   \"Identity\": 61026032,              // String or number\n   \"Gender\": \"M\",                     // Can be either M or F\n   \"DOB\": new Date(),                 // Date of Birth. Date object\n\n// optional fields. controls whether the user will be sent email, push etc.\n   \"MSG-email\": false,                // Disable email notifications\n   \"MSG-push\": true,                  // Enable push notifications\n   \"MSG-sms\": true,                   // Enable sms notifications\n   \"MSG-whatsapp\": true,              // Enable WhatsApp notifications\n   \n }\n});",
      "language": "javascript"
    }
  ]
}
[/block]
## Identity Reset

Identity reset is a mechanism provided to demerge the user profiles. Demerge is the segregation of two different unique identities from one CleverTap ID. Identity reset is recommended when there is a need to demerge a poorly merged profile. <<@sunil explain what is a poorly merged profile>>

To reset an identity, perform the following steps:

1. From the dashboard, navigate to *Segments* > *Find People*.
2. Search for the desired profile.
3. Click **Reset Identities**.

This option contains a number associated with it, indicating the number of identities associated with that profile.


<<@Sunil to change screenshots>>

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/382378e-Reset_identities.png",
        "Reset_identities.png",
        1999,
        692,
        "#fafafa"
      ]
    }
  ]
}
[/block]
# Handle User Identities

You can choose how you want to handle the profiles of your users.
Go to *Settings*> User *Identity*.
The* User Identity* page displays.
Answer the following questions based on your requirements:
  * How do you want to identify logged-in users?
  * How do you want CleverTap to handle identified profiles?
  * Do you want to use ADID and IDFA as device identifiers?

## How do you want to identify logged-in users?

We recommend that you use email to identify your logged-in users because we will merge all devices with the same email ID into a single profile. 
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/c224dfd-Identity_Identity_logged_in_Users.png",
        "Identity_Identity logged in Users.png",
        884,
        436,
        "#fafbfb"
      ],
      "border": true
    }
  ]
}
[/block]
## How Do You Want CleverTap to Handle Identified Profiles?

Based on your requirement,  you can handle the identified profiles from the CleverTap dashboard.
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/54af1bb-How_Do_You_Want_CleverTap_to_Handle_Identified_Profiles.png",
        "How Do You Want CleverTap to Handle Identified Profiles.png",
        932,
        244,
        "#f9fafa"
      ],
      "border": true
    }
  ]
}
[/block]
### Do Not Merge Identifiers on the Same Sevice 
We highly recommend selecting this option to identify users on CleverTap. It is only visible if you have used the `OnUserLogin` method when integrating your application. Check with your developer if this option is not visible. <<@sanskriti is this correct ?>>  The `OnUserLogin` method used during any signup or login method ensures 
that individual user data is stored on separate user profiles even if multiple users sign up or login from the same device. This is the best way to ensure that the correct user data is recorded and events can be tracked efficiently. 

To configure this setting, perform the following steps:
1. From the dashboard, navigate to *Settings* > *User Identity*.
2. Under *How do you want CleverTap to handle identified profiles?*, select *Do not merge identifiers on the same device*. 

###Allow Multiple Identities to Merge on the Same Device 

You can select this option if you require only a single profile to track multiple logged-in users from the same device. 

This option is visible if your developer has implemented the `ProfilePush` method when integrating your application. Selecting this option will allow individual user data for all users to be stored on the user profile of the first user.

This method of identifying users is not recommended because it does not allow multiple individual users to have individual profiles. This type of use case should be implemented in scenarios such as a booking desk application registering all the users onto a singular desk profile. 

To configure this setting, perform the following steps:
1. From the dashboard, navigate to *Settings* > *User Identity*.
2. Under *How do you want CleverTap to handle identified profiles?*, select *Allow multiple identities to merge on the same device*. 

## Do you want to use ADID and IDFA as device identifiers?
There are certain regulatory and compliance limitations for using ADID and IDFA for device identification. Check your compliance before using this option.

### Use AdID and IDFA as Device Identifiers
The Advertising ID (AdID) is a unique, user-resettable ID <<@sanskriti need clarification. for this what does resettable mean?>>> for advertising provided by Google Play services. Similarly, Identifier for Advertisers (IDFA) is a unique code that Apple assigns to each iPhone for third parties to track users for ad targeting. <<@Sanskriti is this information still valid  after ios 14 release?>>
[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/f1e3b52-Do_You_Want_to_Use_ADID_and_IDFA_as_Device_Identifiers.png",
        "Do You Want to Use ADID and IDFA as Device Identifiers.png",
        766,
        250,
        "#f9fafa"
      ]
    }
  ]
}
[/block]

Based on the latest privacy policies designed by Apple, the latest CleverTap iOS SDK does not capture IDFA or other device IDs, such as IMEI. The Identifier for Vendors (IDFV) is used to create a CleverTap ID which is disclosed under *Other Data*.

The Google AdID and IDFV can be captured by the CleverTap SDK during integration. 

The current GDPR policies do not allow using the Google AdID and the IDFA in tracking user data. So if your app conforms with the GDPR policies, it is not recommended to use the Google AdID or the IDFA as device identifiers.

If your use case and region are not governed by the GDPR policies, you can use the Google AdID to capture the user information.

When you use the Google Ad ID for creating a Clevertap ID/Profile, they display as: `__g<google ad id without special characters>`. For iOS, this displays as: `-g<IDFA>`

### Use a Custom Device Identifier

By default, the CleverTap Android SDK does not use the Google Ad ID to generate CleverTap IDs. In this case, you can set your own custom identifiers or allow CleverTap to handle the ID creation to create user profiles.

If the app must be GDPR compliant or if you do not want to use the Google AdID, you can use the `__<Random Alphanumeric String>` notation to generate the CleverTap ID. 

When creating the CleverTap ID using the custom identifier, use the following format: 
  * __h<unique id> for Android. 
  * -h<unique id> for iOS.

### Use IDFV
The Identifier for Vendors (IDFV) is a code assigned to all apps by one developer and is shared across all apps by that developer on your device. The IDFV value is the same for apps from the same developer running on the same iOS-enabled device. This displays as: `-v<IDFV>`

The CleverTap iOS SDK does not track IDFA. CleverTapâ€™s iOS SDK uses IDFV to track anonymous users from SDK version 3.9 above.

You can use IDFV to collect data of users from CleverTap SDK versions 3.9 and above.

# Set Identity 
CleverTap uses two methods to generate identities for users, thus creating user profiles through: 
  * OnUserLogin 
  * ProfilePush			
						
##OnUserLogin <<@sunil merge recommendation section with onuserlogin>>

OnUserLogin is a CleverTap method to differentiate multiple users on the same device.
[block:callout]
{
  "type": "success",
  "body": "User A logs in from a single device then logs out. Now, user B logs in on the same device. `OnUserLogin` helps you to track events performed by A and B separately.",
  "title": "OnUserLogin Example"
}
[/block]
##ProfilePush

ProfilePush is the CleverTap method of updating the user properties. For example, when you want to update the user property called *customer type* from Silver to Gold status.
[block:callout]
{
  "type": "success",
  "title": "ProfilePush Example",
  "body": "User A has upgraded the subscription from a free account to a paid account. You will then use ProfilePush in this case to update the subscription status in the user property."
}
[/block]
##Recommendation
It is recommended to use the `OnUserLogin` method whenever the users sign up or log in to your app. At any log-in possibility, the `OnUserLogin` just works.

Contrary to that, `ProfilePush` works the best when you want to update the user properties of a logged-in user.


[block:callout]
{
  "type": "warning",
  "title": "Do not use Profile Push",
  "body": "The Onuser login method can handle the unique profile creation (Email ID) effectively and automatically. Do not use the Profile Push method to update a user's unique identity on CleverTap."
}
[/block]
##Steps for Profile Creation
This section covers the steps for profile creation for Android and iOS.

###Android
After the integration of CleverTap SDK, two types of scenarios occur:
  * If the app does not need to be GDPR compliant, use the Google Ad ID to create a CleverTap ID/Profile. This displays as: `__g<google ad id>`
  * If the app needs to be GDPR compliant, use `__<Random Alphanumeric String>`
 
In addition, you have the option to set up a custom CleverTap ID which displays as: `__h<unique id>`

After the custom setup, an anonymous user profile will be created tracking all the user activity until a user signs up or logs in. Then, the following occurs:
  * On signup or login, the identity is passed from the user end to CleverTap. This identity can be an email, a mobile phone number, or any other unique identifier.
  * A mapping between the CleverTap ID and this identity ensures that the registered user's profile is merged with that of the user's anonymous profile.
  * This merged profile is now called *Addressed Profile*.

###iOS
After the integration of CleverTap SDK, two types of scenarios occur:
  * If the app does not need to be GDPR compliant, create the CleverTap ID on the basis of IDFA which displays as: `-g<IDFA>`
  * If the app must be GDPR compliant, use `-v<Random Alphanumeric String>`

In addition, you have the option to set up a custom CleverTap ID which displays as: `-h<unique id>`.

After the custom setup, an anonymous user profile is created for tracking all the user activity until a user signs up or logs in. Then, the following occurs:
  * On signup or login, the identity is passed from the user end to CleverTap. This identity can be an email, a mobile phone number, or a unique identity.
  * A mapping between the CleverTap ID and this identity ensures that the registered user's profile is merged with that of the user's anonymous profile.
  * This merged profile is now called *Addressed Profile*.

<<@sunil to change the image>>

[block:image]
{
  "images": [
    {
      "image": [
        "https://files.readme.io/e3c8842-image4.png",
        "image4.png",
        1999,
        691,
        "#f0f1f1"
      ]
    }
  ]
}
[/block]
# Handling User Profiles <<renaming Orphan profiles>>

We will explore some common scenarios that occur when identifying unique users.

## Unidentified User
If the user is not identified, a CleverTap ID is assigned when the user performs an action from a device for the first time. 

[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "X",
    "0-1": "null",
    "0-2": "1",
    "1-0": "Y",
    "2-0": "Y",
    "3-0": "Z",
    "4-0": "X",
    "5-0": "Z",
    "1-1": "null",
    "2-1": "null",
    "3-1": "null",
    "4-1": "null",
    "5-1": "null",
    "1-2": "2",
    "2-2": "2",
    "3-2": "3",
    "4-2": "1",
    "5-2": "3"
  },
  "cols": 3,
  "rows": 6
}
[/block]
There are three unique users in this table.

Here, the first event was performed on device X. Because there was no previous record of this device, CleverTap assigned it a new CleverTap ID of 1.

The second event came from device Y. Because there was no previous record of this device,  CleverTap assigned it a new CleverTap ID of 2.

The third event also came from device Y, and because CleverTap already had a record of this device, it was assigned a CleverTap ID of 2. The same logic applies to device Z. 

## Identified User after anonymous events

For an identified user, CleverTap assumes that all previous events logged anonymously on that device belong to this identified user.

[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "A",
    "1-0": "A",
    "2-0": "A",
    "0-1": "null",
    "0-2": "4",
    "1-1": "null",
    "1-2": "4",
    "2-1": "Jane",
    "2-2": "4"
  },
  "cols": 3,
  "rows": 3
}
[/block]
There is one unique user in this table.

The first two events are logged anonymously on device A and are assigned a CleverTap ID of 4. The third event is the first event received from device A that includes a logged-in user. CleverTap assigns this user the same CleverTap ID as the previous anonymous events. We can now assume that the identified user, Jane performed all three events. 

##  Common User ID on Multiple device IDs with no anonymous events

The device IDs have a lower priority than user IDs.
[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "B",
    "1-0": "C",
    "0-1": "John",
    "0-2": "5",
    "1-1": "John",
    "1-2": "5"
  },
  "cols": 3,
  "rows": 2
}
[/block]

CleverTap assigned a CleverTap ID of 5 to a logged-in user *John*, who performed an event on device B. Thereafter, CleverTap assigns the same CleverTap ID of 5 to John whenever he logs into any device. 

## Multiple user IDs on the same device

If an event is performed from an identified device (a device with at least one user login), then CleverTap associates this event with the previously identified user. 
[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "E",
    "1-0": "E",
    "2-0": "E",
    "3-0": "E",
    "4-0": "E",
    "0-1": "Bob",
    "2-1": "Adam",
    "1-1": "null",
    "3-1": "null",
    "4-1": "null",
    "0-2": "6",
    "1-2": "6",
    "2-2": "7",
    "3-2": "7",
    "4-2": "7"
  },
  "cols": 3,
  "rows": 5
}
[/block]
Bob and Adam are two unique users in this table. 

Bob performed the first event on the device and CleverTap assigned him a CleverTap ID of 6. Somebody performed another event anonymously from the same device. Bob may have logged out but the event was assigned to Bob because he was the last known user. 

Now a logged-in user Adam performs a third event from the same device. This event is assigned a CleverTap ID of 7 because Adam is a different user. 

The next two events are performed anonymously; CleverTap assigns them a CleverTap ID of 7. Because the last known user was Adam, the events are associated with Adam. 

To log out users and log events as anonymous, you must set the User ID to null and regenerate a new device ID. <<@sanskriti, did not understand this part >>>

Follow the instructions in our iOS or Android SDK documentation and set the User ID to null.<<@sanskriti, do we do this at CleverTap?>>>

## Same user ID on multiple devices, with anonymous events

[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "P",
    "1-0": "Q",
    "2-0": "Q",
    "3-0": "Q",
    "0-1": "Smith",
    "2-1": "Smith",
    "1-1": "null",
    "3-1": "null",
    "0-2": "8",
    "1-2": "9",
    "2-2": "8",
    "3-2": "8"
  },
  "cols": 3,
  "rows": 4
}
[/block]
In this example, Smith performs an event on device P and is assigned a CleverTap ID of 8.

Next, an anonymous user logs an event on device Q and is assigned a CleverTap ID of 9 because no user is associated with the device.

Then Smith logs on the application from the same device, that is, device Q. This event has a CleverTap ID of 8 because Smith was already assigned this ID.

Again, an event is logged anonymously on device Q. This event is assigned a CleverTap ID of 8 because the last known user was Smith on this device. 

The anonymous events on device Q have two different CleverTap IDs, even though there's only one user ID associated with the device. This means that both the CleverTap IDs 8 and 9 refer to the same user: Smith. CleverTap will automatically recognize and merge these IDs so that only one user is calculated. This merge can only occur because the event with CleverTap ID 9 does not have a User ID. <<<@sanskriti, does this cover our shard scenario? Is this our orphan profile ?>>

## Bad Merge
<<@sanskriti, is it ok if we expose this information to the customer ?>>
It is important to verify that the mapping on your application is correct. A bad merge is when an incorrect mapping can lead to the merging of information from two different identities. 
[block:parameters]
{
  "data": {
    "h-0": "Device ID",
    "h-1": "User ID",
    "h-2": "CleverTap ID",
    "0-0": "U",
    "1-0": "V",
    "2-0": "",
    "0-1": "Scott",
    "1-1": "Mary",
    "0-2": "10",
    "1-2": "10"
  },
  "cols": 3,
  "rows": 4
}
[/block]
In this example, Scott launches the app and signs on his device. In this case, the email ID scott@xyz and identity123 are assigned to an addressable profile 1. 
Later, Mary launches the app and signs in on her device and her email ID Mary@xyz and identity456 is assigned and Profile 2 is created. 
Mary logs out but when she logs back, your database sends her profile information as Mary@xy and identity as Scott-123. 

### Avoid Bad Merge
* Check that the mapping of users in the application is correct and the correct data is sent to CleverTap. 
* Maintain consistency in assigning a new identity.